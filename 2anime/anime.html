<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="anime.css">
    <link rel="stylesheet" href="search.css">
    <link rel="stylesheet" href="table.css">
    <link rel="stylesheet" href="pagination.css">
    <title>Anime Tracklist</title>
</head> 


<body>
    <script type="module" src="0data/dc-all-anime-data.js"></script>
    <script type="module" src="table.js"></script>

    <div>
        <!-- all content -->
        <div style="position:fixed;">
            <!-- search icon/bar and the results are fixed -->
            <div class="search">
                <!-- search icon-bar -->
                <div class="icon"></div>
                <div class="input">
                    <input type="text" id="search-input" placeholder="Type in episode number or title"
                        onkeydown="handleKeydown(event)">
                    <span class="clear"></span>
                </div>
            </div>
            <div class="results-container" id="results"></div>
        </div>

        <div id="pagination">
            <button id="prev">Previous</button>
            <button id="next">Next</button>
        </div>


        
        <div class="episodes-list">

            <div id="page1">
                <div class="table-container"></div>
            </div>

            <div id="page2">
                <div class="table-container"></div>
            </div>

            <div id="page3">
                <div class="table-container"></div>
            </div>

            <div id="page4">
                <div class="table-container"></div>
            </div>
            
            <div id="page5">
                <div class="table-container"></div>
            </div>

            <div id="page6">
                <div class="table-container"></div>
            </div>

            <div id="page7">
                <div class="table-container"></div>
            </div>

            <div id="page8">
                <div class="table-container"></div>
            </div>

            <div id="page9">
                <div class="table-container"></div>
            </div>

            <div id="page10">
                <div class="table-container"></div>
            </div>

            <div id="page11">
                <div class="table-container"></div>
            </div>

            <div id="page12">
                <div class="table-container"></div>
            </div>
        </div>


    </div>

    <script type="module" src="anime.js"></script>
    <script type="module" src="pagination.js"></script>
    <script type="module" src="search.js"></script>

    <script type="text/javascript">
        function handleKeydown(event) {
            const results = document.querySelectorAll('.results');
            let currentIndex = 0;

            results.forEach((result, index) => {
                if (result.classList.contains('selected')) {
                    currentIndex = index;
                }
            });

            switch (event.key) {
                case 'ArrowDown':
                    event.preventDefault();
                    currentIndex = (currentIndex + 1) % results.length;
                    break;
                case 'ArrowUp':
                    event.preventDefault();
                    currentIndex = (currentIndex - 1 + results.length) % results.length;
                    break;
                case 'Enter':
                    event.preventDefault();
                    if (currentIndex === -1) {
                        // If no result is selected, click the first result
                        results[0].click();
                    } else {
                        results[currentIndex].click();
                    }
                    break;
            }

            // Add 'selected' class to the current index
            results.forEach((result, index) => {
                if (index === currentIndex) {
                    result.classList.add('selected');
                } else {
                    result.classList.remove('selected');
                }
            });

            // Scroll to selected result
            if (currentIndex !== -1) {
                const selectedResult = results[currentIndex];
                const selectedResultRect = selectedResult.getBoundingClientRect();
                const resultsContainerRect = selectedResult.parentElement.getBoundingClientRect();

                if (selectedResultRect.top < resultsContainerRect.top) {
                    // Scroll up to make selected result visible at the top
                    selectedResult.parentElement.scrollTop -= resultsContainerRect.top - selectedResultRect.top;
                } else if (selectedResultRect.bottom > resultsContainerRect.bottom) {
                    // Scroll down to make selected result visible at the bottom
                    selectedResult.parentElement.scrollTop += selectedResultRect.bottom - resultsContainerRect.bottom;
                }
            }
        }
    </script>



    <!-- things to add:
- when the user is on page 1 and clicks "previous", user should be taken to the last page, so the pagination buttons should be infinite
- when user is in page 2 and reloads the webpage, user should stay in current page, instead of getting redirected to page 1
- when an img is added to page 1, for some reason is appears in all pages.
- html content other than the tables shouldnt be pushed all the way down

 -->









</body>

</html>